C51 COMPILER V9.60.0.0   UART1                                                             05/06/2024 01:42:00 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE UART1
OBJECT MODULE PLACED IN UART1.OBJ
COMPILER INVOKED BY: D:\PrgEnv\MDK\core\C51\BIN\C51.EXE UART1.C LARGE OPTIMIZE(8,SPEED) BROWSE NOAREGS DEBUG OBJECTEXTEN
                    -D TABS(2)

line level    source

   1          
   2          /********************************** (C) COPYRIGHT *******************************
   3          * File Name          : UART1.C
   4          * Author             : WCH
   5          * Version            : V1.0
   6          * Date               : 2018/07/25
   7          * Description        : CH554 ‰∏≤Âè£1Êî∂Âèë  
   8          *********************************************************************************
   9          * Copyright (c) 2021 Nanjing Qinheng Microelectronics Co., Ltd.
  10          * Attention: This software (modified or not) and binary are used for 
  11          * microcontroller manufactured by Nanjing Qinheng Microelectronics.
  12          ********************************************************************************/
  13          
  14          #include "CH552.H"                                                          
  15          #include "Debug.H"
  16          #include "UART1.H"
  17          #include "stdio.h"
  18          
  19          #pragma  NOAREGS
  20          
  21          /*******************************************************************************
  22          * Function Name  : UART1Setup()
  23          * Description    : CH554‰∏≤Âè£1ÂàùÂßãÂåñ
  24          * Input          : None
  25          * Output         : None
  26          * Return         : None
  27          *******************************************************************************/
  28          void UART1Init( )
  29          {
  30   1        U1SM0 = 0;                                                                   //UART1ÈÄâÊã©8‰ΩçÊï∞ÊçÆ‰Ωç
  31   1        U1SMOD = 1;                                                                  //Âø´ÈÄüÊ®°Âºè
  32   1        U1REN = 1;                                                                   //‰ΩøËÉΩÊé•Êî∂
  33   1        SBAUD1 = 0 - FREQ_SYS/16/UART1_BUAD;
  34   1        U1TI = 0;
  35   1      #if UART1_PINMAP  
                  PIN_FUNC |= bUART1_PIN_X;                                                   //Êò†Â∞ÑÂà∞P34(R)„ÄÅP32(T)
              #endif
  38   1      
  39   1      #if UART1_INTERRUPT                                                            //ÂºÄÂêØ‰∏≠Êñ≠‰ΩøËÉΩ
  40   1        IE_UART1 = 1; 
  41   1        EA = 1;
  42   1      #endif  
  43   1      }
  44          /*******************************************************************************
  45          * Function Name  : CH554UART1RcvByte()
  46          * Description    : CH554UART1Êé•Êî∂‰∏Ä‰∏™Â≠óËäÇ
  47          * Input          : None
  48          * Output         : None
  49          * Return         : SBUF
  50          *******************************************************************************/
  51          UINT8  CH554UART1RcvByte( )
  52          {
  53   1          while(U1RI == 0);                                                           //Êü•ËØ¢Êé•Êî∂Ôºå‰∏≠Êñ≠Êñπ
             -ÂºèÂèØ‰∏çÁî®
C51 COMPILER V9.60.0.0   UART1                                                             05/06/2024 01:42:00 PAGE 2   

  54   1          U1RI = 0;
  55   1          return SBUF1;
  56   1      }
  57          
  58          /*******************************************************************************
  59          * Function Name  : CH554UART1SendByte(UINT8 SendDat)
  60          * Description    : CH554UART1ÂèëÈÄÅ‰∏Ä‰∏™Â≠óËäÇ
  61          * Input          : UINT8 SendDatÔºõË¶ÅÂèëÈÄÅÁöÑÊï∞ÊçÆ
  62          * Output         : None
  63          * Return         : None
  64          *******************************************************************************/
  65          void CH554UART1SendByte(UINT8 SendDat)
  66          {
  67   1        SBUF1 = SendDat;                                                             //Êü•ËØ¢ÂèëÈÄÅÔºå‰∏≠Êñ≠ÊñπÂº
             -èÂèØ‰∏çÁî®‰∏ãÈù¢2Êù°ËØ≠Âè•,‰ΩÜÂèëÈÄÅÂâçÈúÄTI=0
  68   1        while(U1TI ==0);
  69   1        U1TI = 0;
  70   1      }
  71          
  72          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     32    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
